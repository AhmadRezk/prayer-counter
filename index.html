<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prayer Counter</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Aref+Ruqaa:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Global styles */
        body {
            font-family: 'Amiri', serif;
            background-color: #f5f5f5;
            background-image: url("https://raw.githubusercontent.com/AhmadRezk/prayer-counter/main/background.jpg");
            background-size: 600px 400px;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        /* Main container styling */
        .container {
            width: 100%;
            max-width: 540px;
            background-image: url("https://raw.githubusercontent.com/AhmadRezk/prayer-counter/main/Light%20mode.png");
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            padding: 32px;
            position: relative;
            aspect-ratio: 1080 / 1920; /* Adjust this to match the exact aspect ratio of your image */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Content area styling */
        .content {
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
            max-height: 100%;
            box-sizing: border-box;
        }
        /* Form elements styling */
        select, button {
            width: 100%;
            padding: 12px;
            margin-bottom: 16px;
            font-size: 18px;
            border: 2px solid #ffd700;
            border-radius: 8px;
            background-color: #fff;
            color: #008000;
            transition: all 0.3s ease;
        }
        /* Button specific styles */
        select:focus, button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.5);
        }
        button {
            background-color: #ffd700;
            color: #008000;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.1s;
        }
        button:hover {
            background-color: #ffec8b;
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(0);
        }
        /* Reset button specific styles */
        #reset-button {
            background-color: #ff6347;
            color: #fff;
        }
        #reset-button:hover {
            background-color: #ff4500;
        }
        /* Checkbox container styling */
        .checkbox-container {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 16px;
            width: 100%;
        }
        /* Checkbox label styling */
        .checkbox-container label {
            margin-right: 8px;
            font-size: 18px;
            color: #008000;
        }
        /* Prayer information styling */
        #prayer-info {
            text-align: center;
            margin-bottom: 16px;
            font-size: 20px;
            color: #008000;
        }
        /* Prayer image styling */
        #prayer-image {
            width: 160px;
            height: 160px;
            object-fit: cover;
            border-radius: 50%;
            margin-bottom: 16px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            border: 5px solid #ffd700;
            box-shadow: 0 0 0 5px #008000;
        }
        /* Count display styling */
        #count-display {
            font-size: 48px;
            font-weight: bold;
            color: #008000;
            margin-bottom: 16px;
            text-align: center;
        }
        /* Hidden class */
        .hidden {
            display: none;
        }
        /* Pie chart progress styling */
        .pie-chart-progress {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(#008000 0deg, #e0e0e0 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 16px auto;
        }
        .pie-chart-progress::before {
            content: attr(data-value);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #008000;
        }
        /* Counting area styling */
        #counting-area {
            width: 100%;
            height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: rgba(255, 215, 0, 0.1);
            border-radius: 8px;
            margin-bottom: 16px;
            cursor: pointer;
            border: 2px solid #ffd700;
            transition: all 0.3s ease;
        }
        #counting-area:hover {
            background-color: rgba(255, 215, 0, 0.2);
            transform: scale(1.02);
        }
        /* Start page styling */
        #start-page {
            text-align: center;
            color: #008000;
        }
        #start-page h1 {
            font-size: 36px;
            margin-bottom: 20px;
            font-family: 'Aref Ruqaa', serif;
        }
        #start-page p {
            font-size: 18px;
            margin-bottom: 30px;
        }
        .scroll-container {
            max-height: 100%;
            overflow-y: auto;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 5% 0;
        }
        .inner-content {
            width: 100%;
            max-width: 400px;
        }
    </style>
</head>
<body>
    <!-- Main container -->
    <div class="container">
        <div class="scroll-container">
            <div class="inner-content">
                <div class="content">
                    <!-- Start page -->
                    <div id="start-page">
                        <h1>فواتح السلسلة الصغيرة</h1>
                        <p>أهلا بكم في تطبيق عداد الفواتح. الرجاء اختيار الإعدادات وبدء العد.</p>
                        <!-- Dropdown for selecting prayer count -->
                        <select id="count-option">
                            <option value="1,3">١ و ٣</option>
                            <option value="3,7">٣ و ٧</option>
                            <option value="7,13">٧ و ١٣</option>
                            <option value="11,33" selected>١١ و ٣٣</option>
                            <option value="33,66">٣٣ و ٦٦</option>
                            <option value="100,300">١٠٠ و ٣٠٠</option>
                        </select>
                        <!-- Checkbox for including additional prayers -->
                        <div class="checkbox-container">
                            <input type="checkbox" id="include-more">
                            <label for="include-more">مشايخ أضافية</label>
                        </div>
                        <!-- Start button -->
                        <button id="start-button">ابــــــــــــــــــــــدء</button>
                    </div>
                    <!-- Prayer section (hidden initially) -->
                    <div id="prayer-section" class="hidden">
                        <!-- Image of the current prayer -->
                        <img id="prayer-image" src="/placeholder.svg" alt="">
                        <!-- Information about the current prayer -->
                        <div id="prayer-info"></div>
                        <!-- Counting area -->
                        <div id="counting-area">
                            <div id="count-display"></div>
                        </div>
                        <!-- Skip and reset buttons -->
                        <button id="skip-button">تخطي</button>
                        <button id="reset-button">إعادة ضبط</button>
                        <!-- Pie chart progress -->
                        <div id="pie-chart-progress" class="pie-chart-progress" data-value="0%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Audio elements for click and transition sounds -->
    <audio id="click-sound" src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/Fast%20Double%20Click%20Sound-cbGuDp9BQN71Ts3O1gC5qQdKLy9tjL.wav"></audio>
    <audio id="transition-sound" src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/decidemp3-14575-pGfb0ZP4MfDWwkDOO07E21wIf9x39Z.mp3"></audio>

    <script>
    // Object mapping names to image URLs
    const NAME_TO_IMAGE = {
        "الشيخ محمد الشيخ ابراهيم الشيخ محمد عثمان": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/1-8mitPjoVfhd2tG2W6qld9Y9lKRSall.png",
        "الشيخ ابراهيم الشيخ محمد عثمان": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/2-3leRLZkfOZRXRhSZq32VVMYaIb6Owc.png",
        "الشيخ محمد عثمان عبده البرهاني": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/3-7zq7sjD8mzsPIP75gjx9G8mMtJmBl9.png",
        "سيدي احمد عربي الشرنوبي": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/4-VdjgtQtNTFBJi6nmhJ6H6oAvgqXrux.png",
        "سيدي موسى ابو العمران": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/5-eUerd9IB3fLwu7pnudt6wftzsA7hlo.png",
        "سيدي ابراهيم القرشي الدسوقي": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/6-Ic0N1gjwhOCvNAefrsWwgB6VXBHJBw.png",
        "سيدي أبو الحسن الشاذلي": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/7-8IfoXRWHXjPGi44hTnLPdmTrMc489B.png",
        "سيدي عبد السلام إبن بشيش": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/8-WpwG9ybIlzaRcGtMIZmKsLuBhzuZA4.png",
        "سيدنا ومولانا الإمام الحسين": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/9-OIlB9dSeaiBtsCK7DiNrDZoA1AOzZJ.png",
        "سيدنا ومولانا الإمام علي بن ابي طالب": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/10-jURWWjYkJcRYO7Vpw0EI7KD3ZvoRwy.png",
        "زيادة في شرف المصطفى ﷺ": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/11-J5k1QRM5OlXjND2AvZNkvicf8HyT4S.png",
        "سيدتنا السيدة زينب": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/12-WVUnUyiXdzakLGgNFNBeoqs5YM8UxP.png",
        "الشيخ سيد أحمد": "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/placeholder.svg"
    };

    // Array of initial prayers
    const INITIAL_PRAYERS = [
        { name: "الشيخ محمد الشيخ ابراهيم الشيخ محمد عثمان", content: "الفاتحة" },
        { name: "الشيخ محمد الشيخ ابراهيم الشيخ محمد عثمان", content: "الصمدية" },
        { name: "الشيخ ابراهيم الشيخ محمد عثمان", content: "الفاتحة" },
        { name: "الشيخ ابراهيم الشيخ محمد عثمان", content: "الصمدية" },
        { name: "الشيخ محمد عثمان عبده البرهاني", content: "الفاتحة" },
        { name: "الشيخ محمد عثمان عبده البرهاني", content: "الصمدية" },
        { name: "سيدي احمد عربي الشرنوبي", content: "الفاتحة" },
        { name: "سيدي احمد عربي الشرنوبي", content: "الصمدية" },
        { name: "سيدي موسى ابو العمران", content: "الفاتحة" },
        { name: "سيدي موسى ابو العمران", content: "الصمدية" },
        { name: "سيدي ابراهيم القرشي الدسوقي", content: "الفاتحة" },
        { name: "سيدي ابراهيم القرشي الدسوقي", content: "الصمدية" },
        { name: "سيدي أبو الحسن الشاذلي", content: "الفاتحة" },
        { name: "سيدي أبو الحسن الشاذلي", content: "الصمدية" },
        { name: "سيدي عبد السلام إبن بشيش", content: "الفاتحة" },
        { name: "سيدي عبد السلام إبن بشيش", content: "الصمدية" },
        { name: "سيدنا ومولانا الإمام الحسين", content: "الفاتحة" },
        { name: "سيدنا ومولانا الإمام الحسين", content: "الصمدية" },
        { name: "سيدنا ومولانا الإمام علي بن ابي طالب", content: "الفاتحة" },
        { name: "سيدنا ومولانا الإمام علي بن ابي طالب", content: "الصمدية" },
        { name: "زيادة في شرف المصطفى ﷺ", content: "الفاتحة" },
        { name: "زيادة في شرف المصطفى ﷺ", content: "الصمدية" },
    ];

    // Array of additional prayers
    const ADDITIONAL_PRAYERS = [
        { name: "سيدتنا السيدة زينب", content: "الفاتحة", image: "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/12-WVUnUyiXdzakLGgNFNBeoqs5YM8UxP.png" },
        { name: "سيدتنا السيدة زينب", content: "الصمدية", image: "https://hebbkx1anhila5yf.public.blob.vercel-storage.com/12-WVUnUyiXdzakLGgNFNBeoqs5YM8UxP.png" },
        { name: "الشيخ سيد أحمد", content: "الفاتحة" },
        { name: "الشيخ سيد أحمد", content: "الصمدية" }
    ];

    // Initialize state and audio elements
    let state = null;
    const clickSound = document.getElementById('click-sound');
    const transitionSound = document.getElementById('transition-sound');

    // Function to convert numbers to Indian numerals
    function toIndianNumerals(number) {
        const indianNumerals = ['٠', '١', '٢', '٣', '٤', '٥', '٦', '٧', '٨', '٩'];
        return number.toString().split('').map(digit => indianNumerals[parseInt(digit)]).join('');
    }

    // Function to get prayers based on selected option and inclusion of additional prayers
    function getPrayers(selectedOption, includeMore) {
        const [count1, count2] = selectedOption.split(',').map(Number);
        const prayers = [...INITIAL_PRAYERS, ...(includeMore ? ADDITIONAL_PRAYERS : [])].map((prayer, index) => ({
            ...prayer,
            count: index % 2 === 0 ? count1 : count2,
            image: prayer.image || NAME_TO_IMAGE[prayer.name] || '/placeholder.svg'
        }));
        return prayers;
    }

    // Function to update the UI based on current state
    function updateUI() {
        if (!state || state.finished) return;
        const prayer = state.prayers[state.currentIndex];
        document.getElementById('prayer-image').src = prayer.image || '';
        document.getElementById('prayer-info').innerHTML = `${prayer.name}<br>${prayer.content}`;
        document.getElementById('count-display').textContent = `${toIndianNumerals(state.currentCount)} / ${toIndianNumerals(prayer.count)}`;

        // Update pie chart progress
        const progressPercentage = (state.totalCount / state.totalCountable) * 100;
        const pieChart = document.getElementById('pie-chart-progress');
        pieChart.style.background = `conic-gradient(#008000 ${progressPercentage * 3.6}deg, #e0e0e0 0deg)`;
        pieChart.setAttribute('data-value', `${Math.round(progressPercentage)}%`);

        // Save state to localStorage
        localStorage.setItem('prayerCounterState', JSON.stringify(state));
    }

    // Function to start the prayer counter
    function startPrayers(selectedOption, includeMore) {
        const prayers = getPrayers(selectedOption, includeMore);
        const totalCountable = prayers.reduce((sum, prayer) => sum + prayer.count, 0);
        state = {
            prayers: prayers,
            currentIndex: 0,
            currentCount: 0,
            totalCount: 0,
            totalCountable: totalCountable,
            finished: false
        };
        document.getElementById('start-page').classList.add('hidden');
        document.getElementById('prayer-section').classList.remove('hidden');
        updateUI();
    }

    // Event listener for start button
    document.getElementById('start-button').addEventListener('click', () => {
        const selectedOption = document.getElementById('count-option').value;
        const includeMore = document.getElementById('include-more').checked;
        startPrayers(selectedOption, includeMore);
        transitionSound.play();
    });

    // Load state from localStorage
    window.addEventListener('load', () => {
        const savedState = localStorage.getItem('prayerCounterState');
        if (savedState) {
            state = JSON.parse(savedState);
            if (!state.finished) {
                document.getElementById('start-page').classList.add('hidden');
                document.getElementById('prayer-section').classList.remove('hidden');
                updateUI();
            }
        }
    });

    // Event listener for counting area
    document.getElementById('counting-area').addEventListener('click', () => {
        if (!state || state.finished) return;
        const prayer = state.prayers[state.currentIndex];
        state.currentCount += 1;
        state.totalCount += 1;
        clickSound.play();
        if (state.currentCount >= prayer.count) {
            state.currentIndex += 1;
            state.currentCount = 0;
            if (state.currentIndex >= state.prayers.length) {
                state.finished = true;
                alert('All prayers completed!');
                localStorage.removeItem('prayerCounterState');
                return;
            }
        }
        updateUI();
    });

    // Event listener for skip button
    document.getElementById('skip-button').addEventListener('click', () => {
        if (!state || state.finished) return;
        state.currentIndex += 1;
        state.currentCount = 0;
        if (state.currentIndex >= state.prayers.length) {
            state.finished = true;
            alert('All prayers completed!');
            localStorage.removeItem('prayerCounterState');
            return;
        }
        updateUI();
    });

    // Event listener for reset button
    document.getElementById('reset-button').addEventListener('click', () => {
        if (!state) return;
        const confirmed = confirm('Are you sure you want to reset?');
        if (confirmed) {
            localStorage.removeItem('prayerCounterState');
            state = null;
            document.getElementById('start-page').classList.remove('hidden');
            document.getElementById('prayer-section').classList.add('hidden');
            transitionSound.play();
        }
    });
</script>
